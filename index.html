<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdn.plot.ly/plotly-2.11.1.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <meta charset="UTF-8">
    <title>CAC scoring</title>
</head>
<body>
<div id="myDiv" style="width:100%;height:100vh;">

</div>
<script>
    d3.json('./data/poster-survey.json').then(data=>{

        const groupsPerson = d3.groups(data,d=>d.presenter_id);
        const maxSubmit = d3.max(groupsPerson,d=>d[1].length);
        const plotdata = d3.range(0,maxSubmit).map(trace=>({
            x: groupsPerson.map(d=>`Poster ${d[0]}`),
            y: groupsPerson.map(d=>d[1][trace]?(+d[1][trace].criteria_1):null),
            type: 'bar'
        }));
        var layout = {
            title: 'CAC Poster scoring',
            barmode: 'group',
            showlegend: false
        };
        Plotly.newPlot('myDiv', plotdata, layout);
    })

</script>

</body>
</html>